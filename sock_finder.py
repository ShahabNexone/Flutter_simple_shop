#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""ุงู ุจุฑูุงูู ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุฌูุฑุงุจโูุง ฺฏูุดุฏู ุฎูุฏ ุฑุง ุจุง ุฑูุดโูุง ุจุณุงุฑ ุนูู ู ฺฉู ุฎูุฏูโุฏุงุฑ ูพุฏุง ฺฉูุฏ!"""

import random
import time
from sock_data import SCANNING_MESSAGES, DEFAULT_FINDINGS, POSSIBLE_FINDINGS_CONDITIONS, RECOMMENDATIONS

def get_sock_details():
    """ุงุทูุงุนุงุช ุฌูุฑุงุจ ฺฏูุดุฏู ุฑุง ุงุฒ ฺฉุงุฑุจุฑ ุจุง ุณูุงูุงุช ฺฉู ุนุฌุจโุชุฑ ู ุทูุฒุขูุฒุชุฑ ุฏุฑุงูุช ู ฺฉูุฏ."""
    print("\nุจู ุจุฎุด ุจุงุฒุฌู ููู ุณุฑ ุฌูุฑุงุจ ฺฏูุดุฏู ุฎูุด ุขูุฏุฏ! ูุทูุงู ุจุง ุตุฏุงูุช ฺฉุงูู ู ุจุฏูู ูฺฺฏููู ูพููุงูโฺฉุงุฑ ุจู ุณูุงูุงุช ูพุงุณุฎ ุฏูุฏ. ุณุฑููุดุช ฺฉูฺฉุดุงู (ุง ุญุฏุงูู ฺฉุดู ุฌูุฑุงุจ ุดูุง) ุจู ุงู ุงุทูุงุนุงุช ุจุณุชฺฏ ุฏุงุฑุฏ!")
    color = input("ุฑูฺฏ ุฏูู ู ฺฉุงูู ุฌูุฑุงุจ ฺฏูุดุฏู ฺุณุชุ (ูุซูุงู: ูุฑูุฒ ฺฏูุฌูโุง ุฑุณุฏูุ ุขุจ ุขุณูุงู ุฏุฑ ฺฉ ุตุจุญ ุฏูโุงูฺฏุฒ ุจูุงุฑุ ุณุจุฒ ูุฌู ูุฑููุฒ) ")
    sock_type = input("ููุน ุฌูุฑุงุจ ฺุณุชุ (ูุซูุงู: ูุฑุฒุด ูุฑุงุฑ ู ุฎุณุชฺฏโูุงูพุฐุฑุ ูพุดู ููุณูู ู ฺฏูุดูโฺฏุฑุ ูฺ ูููุงูโุฏูุณุช ู ุงุฌุชูุงุนุ ุณุงู ุจููุฏ ูุงุฌุฑุงุฌู ู ุฌูุงูฺฏุฑุฏุ ุง ุดุงุฏ ฺฉ ุฌูุฑุงุจ ูุถุง ุจุง ุชฺฉููููฺ ูุงูุนูููุ) ")
    last_seen = input("ุขุฎุฑู ุจุงุฑ ุงู ูุธููู ุฌูุฑุงุจ ฺฉุฌุง ู ุฏุฑ ฺู ุดุฑุงุท ูุดุงูุฏู ุดุฏู ุงุณุชุ (ูุฑฺู ุฌุฒุฆุงุช ุจุดุชุฑ ู ุนุฌุจโุชุฑุ ุดุงูุณ ููููุช ูุง ุฏุฑ ุงู ุนููุงุช ุฎุทุฑ ุจุงูุงุชุฑ! ูุซูุง: ุฒุฑ ูุจูุ ุฏุฑ ุญุงู ูุฑุงุฑ ุจู ุณูุช ูุงุดู ูุจุงุณุดู ุจุง ฺฉ ฺูุฏุงู ฺฉูฺฺฉุ ุง ุฏุฑ ุญุงู ฺฏูุชฺฏู ุจุง ฺฏุฑุจู ููุณุงู) ")
    motive = input("ุจู ูุธุฑ ุดูุงุ ุงู ุฌูุฑุงุจ ฺู ุงูฺฏุฒู ูพููุงู ู ุดูู ุจุฑุง ูุงูพุฏุฏ ุดุฏู ุฏุงุฑุฏุ (ูุซูุงู: ูพูุณุชู ุจู ุณุฑฺฉ ุจูโุงูููู ุฌูุฑุงุจโูุง ฺฏูุดุฏูุ ุณูุฑ ุจู ูุงู ุจุฑุง ฺฉุดู ูพูุฑ ุณุจุฒุ ุงุนุชุฑุงุถ ุจู ุจู ูพุง ู ุดุฑูุน ฺฉ ุฒูุฏฺฏ ุฌุฏุฏุ ุง ุดุงุฏ ุชุดฺฉู ฺฉ ุงุฑุชุด ุฌูุฑุงุจ ุจุฑุง ุชุณุฎุฑ ุฌูุงูุ) ")
    
    sock_info = {
        'color': color,
        'type': sock_type,
        'last_seen': last_seen,
        'motive': motive
    }
    return sock_info

def perform_scan(sock_info):
    """ุงุณฺฉู ูุญุท ุจุฑุง ุงูุชู ุฌูุฑุงุจ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุทูุงุนุงุช ุฏุฑุงูุช."""
    print(f"\nุงุณฺฉู ุจุฑุง ุฌูุฑุงุจ ุจุง ูุดุฎุตุงุช ุฒุฑ ุดุฑูุน ู ุดูุฏ:")
    print(f"  ุฑูฺฏ: {sock_info['color']}")
    print(f"  ููุน: {sock_info['type']}")
    print(f"  ุขุฎุฑู ูฺฉุงู ูุดุงูุฏู ุดุฏู: {sock_info['last_seen']}")
    print(f"  ููุดู ุงุญุชูุงู: {sock_info['motive']}")
    
    print("\n") # Add a newline for better formatting before scan messages
    for message, duration in SCANNING_MESSAGES:
        print(message)
        time.sleep(duration)

    # Determine findings using logic from sock_data
    final_findings = []
    for condition_lambda, findings_list in POSSIBLE_FINDINGS_CONDITIONS:
        if condition_lambda(sock_info):
            final_findings.extend(findings_list)
    
    if final_findings:
        sock_info['scan_findings'] = random.choice(final_findings)
    else:
        sock_info['scan_findings'] = random.choice(DEFAULT_FINDINGS)

def display_results(sock_info):
    """ููุงุด ูุชุงุฌ ุงุณฺฉู ู ุณุฑููุดุช ุฌูุฑุงุจ ุจู ููุฑุงู ุชูุตูโูุง ุจุณุงุฑ ููุฏ."""
    print("\n\n===================================")
    print("   ฺฏุฒุงุฑุด ุฑุณู ุนููุงุช ุฌูุฑุงุจโุงุจ   ")
    print("===================================")

    print("\nูุดุฎุตุงุช ุฌูุฑุงุจ ุชุญุช ูพฺฏุฑุฏ:")
    print(f"  - ุฑูฺฏ: {sock_info.get('color', 'ูุงูุดุฎุต')}")
    print(f"  - ููุน: {sock_info.get('type', 'ูุงูุดุฎุต')}")
    print(f"  - ุขุฎุฑู ูฺฉุงู ุฑูุช ุดุฏู: {sock_info.get('last_seen', 'ูุงูุดุฎุต')}")
    print(f"  - ุงูฺฏุฒู ุงุญุชูุงู ุจุฑุง ูุงูพุฏุฏ ุดุฏู: {sock_info.get('motive', 'ูุงูุดุฎุต')}")

    print("\nุงูุชูโูุง ุงุณฺฉู ููู ูพุดุฑูุชู ฺฉูุงูุชูู:")
    print(f"  >>> {sock_info.get('scan_findings', 'ุงุณฺฉู ูุชุฌูโุง ุฏุฑ ุจุฑ ูุฏุงุดุช. ุดุงุฏ ุฌูุฑุงุจ ุดูุง ุงุตูุง ูุฌูุฏ ุฎุงุฑุฌ ูุฏุงุฑุฏุ')}")
    
    print("\n๐ ุชูุตู ุชู ููู ุชุฎุตุต ฺฉุงุฑุดูุงุณุงู ุฌูุฑุงุจโุดูุงุณ ุจูโุงูููู ู ุงููุฑ ูุฑุงุฒูู ุฌูุฑุงุจ:")
    print(f"  -> {random.choice(RECOMMENDATIONS)}")
    print("===================================")
    print("ูพุงุงู ฺฏุฒุงุฑุด.")

def main():
    """ุชุงุจุน ุงุตู ุจุฑูุงูู ุจุฑุง ุงูุชู ุฌูุฑุงุจ ฺฏูุดุฏู ุจุง ฺุงุดู ุทูุฒ ฺฉูุงู ู ูุงุฌุฑุงุฌูโูุง ุจูโุจุนุฏ."""
    # ุงู ุจุฑูุงูู ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุฌูุฑุงุจโูุง ฺฏูุดุฏู ุฎูุฏ ุฑุง ุจุง ุฑูุดโูุง ุจุณุงุฑ ุนููุ ฺฉู ุฎูุฏูโุฏุงุฑ ู ููุงุฏุฑ ุฌุงุฏู ุณุงู ูพุฏุง ฺฉูุฏ!
    print("\n*** ุจู ุฌูุฑุงุจ ุงุจ ููู ูพุดุฑูุชู ฺฉูุงูุชูู ูุณุฎู X-Omega 7.1 ุฎูุด ุขูุฏุฏ! ***")
    print("ูุง ุฌูุฑุงุจ ุดูุง ุฑุง ุญุช ุงฺฏุฑ ุจู ุจูุนุฏ ุฏฺฏุฑ ฺฏุฑุฎุชู ุจุงุดุฏ ุง ุชูุณุท ฺฏ๋ููโูุง ูุจุงุณุดู ุฏุฒุฏุฏู ุดุฏู ุจุงุดุฏุ ูพุฏุง ู ฺฉูู (ุง ุญุฏุงูู ุฎู ุชูุงุด ูโฺฉูู).")
    sock_info = get_sock_details()
    
    print("\n--- ูพุฑููุฏู ุฌูุฑุงุจ ููููุฏู ุจุฑุง ุงุฑุณุงู ุจู ูุงุจุฑุงุชูุงุฑ ุชุญููโูุง ูพุดุฑูุชู ุฌูุฑุงุจ ุขูุงุฏู ุดุฏ ---")
    print(f"  ุดูุงุฑู ูพุฑููุฏู ูฺู: {random.randint(1000, 9999)}-SOCK-{random.choice(['ALPHA', 'OMEGA', 'SIGMA', 'GAMMA'])}-{random.randint(1,100)}")
    print(f"  ุณุทุญ ูุญุฑูุงูฺฏ: ููู ุณุฑ (ุญุช ุงุฒ ุฎูุฏุชุงู ูู ูุฎูโุชุฑ)")
    print(f"  ูุถุนุช ูุนู: ุฏุฑ ุญุงู ุงุฑุณุงู ุจู ุขุฒูุงุดฺฏุงู ุชุญูู ุฌูุฑุงุจโูุง ูุฑุงุฑ ู ุณุฑฺฉุด ูุงูุน ุฏุฑ ูุซูุซ ุจุฑููุฏุง")
    print("------------------------------------------------------------------------------------\n")
    
    perform_scan(sock_info) 
    display_results(sock_info)

if __name__ == "__main__":
    main()
